var Client;Client=(()=>{"use strict";var e={64:(e,t,a)=>{function o(){const e=document.getElementById("year"),t=document.getElementById("month"),a=document.getElementById("day"),o=[e.value,t.value,a.value],n=new Date,s=(new Date(o).getTime()-n.getTime())/864e5;let c=Math.floor(s),r=0;c>365&&(r=Math.floor(c/365),c%=365);const i=c+1;document.getElementById("days-left").innerHTML=0==r&&0==i?"Your flight is today":r<=0&&i<=0?"all the flights has passed":0==r&&1==i?"Your flight is tomorrow":0==r&&i<=366?`Your flight is in ${i} days`:1==r?`${r} year and \n        ${i} days until departure`:`${r} years and \n        ${i} days until departure`,(async(e="",t={})=>{const a=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await a.json();console.log("Data from postCountdown",e)}catch(e){console.log("Error postCountdown",e)}})("http://localhost:8000/countdownData",{yearsLeft:r,daysLeft:i})}a.r(t),a.d(t,{countdown:()=>o,getPixabay:()=>n,handleSubmit:()=>r}),console.log(864e5);const n=async e=>{console.log("forecast in pixabay",e.cityName);const t=`https://pixabay.com/api/?key=20274748-d371ce4094535153c9c4b39c7&q=${e.cityName}&image_type=photo`,a=await fetch(t);try{const e=await a.json();document.getElementById("pixabay-image").setAttribute("src",e.hits[0].previewURL),console.log(e)}catch(e){console.log("getPixabay ERROR",e),image.src="https://cdn.pixabay.com/photo/2015/07/11/23/02/plane-841441_960_720.jpg"}},s=document.getElementsByClassName("weather-degrees")[0],c=document.getElementsByClassName("date-degrees");async function r(e){e.preventDefault();const t=await d(),a=await y("http://localhost:8000/addCity",{lat:t.geonames[0].lat,lng:t.geonames[0].lng,country:t.geonames[0].countryName}),s=await l(a),c=await y("http://localhost:8000/addWeatherbit",{cityName:s.cityName,forecast:s.weather,date:s.datetime});await n(s),await i(c,t),o()}const i=async(e,t)=>{const a=document.getElementsByClassName("anyday")[0];document.getElementById("explore-today").innerHTML="",a.innerHTML=t.geonames[0].name,a.classList.add("anyday-active"),console.log(a);for(let t=0;t<c.length;t++){const a=new Date(e[t].day).toString();console.log(a.slice(0,4)),c[t].children[0].innerHTML=e[t].day,c[t].children[1].innerHTML=`${e[t].celcius}Â°`}s.style.display="grid",document.getElementById("forecast-header").innerHTML="16 Day Forecast"},l=async e=>{const t=`https://api.weatherbit.io/v2.0/forecast/daily?&city=&lat=${e.latitude}&lon=${e.longitude}&key=d19e85ae1f564e4483bef3ec6d5390d6`,a=await fetch(t);try{const e=await a.json();return{weather:e.data,cityName:e.city_name}}catch(e){console.log("error getWeaterbitAPI",e)}},d=async()=>{const e=`http://api.geonames.org/searchJSON?q=${document.getElementById("user-city-input").value}&maxRows=1&username=ToplessPizza`,t=await fetch(e);try{return await t.json()}catch(e){console.log(e)}},y=async(e="",t={})=>{const a=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{return await a.json()}catch(e){console.log("postData ERROR",e)}};document.getElementById("generate").addEventListener("click",r)}},t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,a),n.exports}return a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(64)})();